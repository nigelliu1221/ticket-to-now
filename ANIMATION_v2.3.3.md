# 🌊 v2.3.3 緩慢柔和的呼吸動畫

## 問題
圓球的放大縮小動畫太快，不夠柔和

## 解決方案

### 核心改進

#### Before（v2.3.2）❌
```css
.breath-circle {
    transition: transform 1s ease-in-out;
}
```

**問題**：
- ❌ 固定 1 秒，不管呼吸時長
- ❌ 吸氣 4 秒，但動畫只用 1 秒
- ❌ 感覺很急促、不自然

#### After（v2.3.3）✅
```css
.breath-circle.inhale {
    transform: scale(1.6);
    transition: transform var(--inhale-duration) cubic-bezier(0.4, 0, 0.2, 1);
}

.breath-circle.exhale {
    transform: scale(1);
    transition: transform var(--exhale-duration) cubic-bezier(0.4, 0, 0.2, 1);
}
```

**改進**：
- ✅ 動畫時長 = 呼吸時長
- ✅ 吸氣 4 秒，動畫就用 4 秒
- ✅ 吐氣 6 秒，動畫就用 6 秒
- ✅ 完美同步

---

## 動態時長設定

### JavaScript 設定
```javascript
function startBreath() {
    // 取得當前呼吸法
    const pattern = currentPattern;
    
    // 設定 CSS 變數
    const circle = document.getElementById('breathCircle');
    circle.style.setProperty('--inhale-duration', pattern.inhale + 's');
    circle.style.setProperty('--exhale-duration', pattern.exhale + 's');
    
    // 例如：平衡呼吸（4-0-4）
    // --inhale-duration: 4s
    // --exhale-duration: 4s
}
```

### 不同呼吸法的動畫時長

| 呼吸法 | 吸氣 | 停頓 | 吐氣 | 吸氣動畫 | 吐氣動畫 |
|--------|------|------|------|----------|----------|
| 平衡呼吸 | 4秒 | - | 4秒 | **4秒** | **4秒** |
| 放鬆呼吸 | 3秒 | - | 6秒 | **3秒** | **6秒** |
| 活力呼吸 | 2秒 | - | 2秒 | **2秒** | **2秒** |
| 深度呼吸 | 5秒 | - | 5秒 | **5秒** | **5秒** |
| 專注呼吸 | 3秒 | 2秒 | 3秒 | **3秒** | **3秒** |

**重點**：每種呼吸法都有自己的動畫速度！

---

## 緩動曲線（Easing）

### cubic-bezier(0.4, 0, 0.2, 1)

這是 Material Design 的標準緩動曲線，特點：

```
速度變化：
    慢 → 快 → 慢

    ╱────╲
  ╱        ╲
╱            ╲

開始：緩慢啟動
中間：快速移動
結束：緩慢停止
```

**為什麼選這個？**
- ✅ 模擬真實呼吸
- ✅ 自然的加速減速
- ✅ 舒適的視覺體驗
- ✅ 符合人體工學

### 其他緩動對比

#### ease-in-out（之前用的）
```
速度： 慢 → 快 → 慢
特點： 對稱的加減速
感覺： 機械、不夠自然
```

#### cubic-bezier(0.4, 0, 0.2, 1)（現在用的）
```
速度： 很慢 → 快 → 很慢
特點： 更柔和的啟動和停止
感覺： 自然、像真實呼吸
```

---

## 動畫時間軸

### 平衡呼吸（4-0-4）範例

```
第 1 輪：

0s ────────────── 4s ────────────── 8s
│                 │                 │
開始              吸氣結束          吐氣結束
○                 ⬤                 ○
小                大                小

吸氣階段（0-4秒）：
  0.0s: ○ (scale 1.0)
  0.5s: ◔ (scale 1.1)
  1.0s: ◑ (scale 1.2)
  1.5s: ◑ (scale 1.3)
  2.0s: ◕ (scale 1.4)  ← 中間點，速度最快
  2.5s: ◕ (scale 1.45)
  3.0s: ◕ (scale 1.5)
  3.5s: ⬤ (scale 1.55)
  4.0s: ⬤ (scale 1.6)  ← 完全吸飽

吐氣階段（4-8秒）：
  4.0s: ⬤ (scale 1.6)
  4.5s: ◕ (scale 1.5)
  5.0s: ◕ (scale 1.4)
  5.5s: ◑ (scale 1.3)
  6.0s: ◑ (scale 1.2)  ← 中間點，速度最快
  6.5s: ◔ (scale 1.15)
  7.0s: ◔ (scale 1.1)
  7.5s: ○ (scale 1.05)
  8.0s: ○ (scale 1.0)  ← 完全吐盡
```

**關鍵**：
- 開始和結束都很慢
- 中間過程較快
- 整個過程流暢自然

---

## 視覺效果對比

### Before（急促）❌
```
吸氣 4 秒，但動畫 1 秒就結束：

0s    1s    2s    3s    4s
│─────│─────│─────│─────│
○→⬤   ⬤     ⬤     ⬤     ⬤
快速  停住  停住  停住  停住

問題：
❌ 1秒就放大完成
❌ 剩下 3 秒沒有動畫
❌ 感覺很急
❌ 無法引導呼吸
```

### After（緩慢柔和）✅
```
吸氣 4 秒，動畫也用 4 秒：

0s    1s    2s    3s    4s
│─────│─────│─────│─────│
○→→◑→→◕→→⬤
緩慢  持續  持續  持續  完成

效果：
✅ 全程都在緩慢放大
✅ 節奏與呼吸同步
✅ 舒適、自然
✅ 完美引導呼吸
```

---

## 不同呼吸法的感受

### 活力呼吸（2-0-2）
```
快節奏：
○→⬤ (2秒快速)
⬤→○ (2秒快速)

感覺：有活力、有節奏
```

### 深度呼吸（5-0-5）
```
慢節奏：
○→→→→⬤ (5秒緩慢)
⬤→→→→○ (5秒緩慢)

感覺：深沉、放鬆、冥想
```

### 放鬆呼吸（3-0-6）
```
不對稱：
○→→⬤ (3秒吸)
⬤→→→→→○ (6秒吐)

感覺：長吐氣很放鬆
```

---

## 技術實作

### CSS 變數
```css
/* 預設值 */
.breath-circle {
    --inhale-duration: 4s;
    --exhale-duration: 4s;
}

/* 使用變數 */
.breath-circle.inhale {
    transition: transform var(--inhale-duration) cubic-bezier(0.4, 0, 0.2, 1);
}

.breath-circle.exhale {
    transition: transform var(--exhale-duration) cubic-bezier(0.4, 0, 0.2, 1);
}
```

### JavaScript 動態設定
```javascript
// 根據呼吸法設定時長
circle.style.setProperty('--inhale-duration', '4s');
circle.style.setProperty('--exhale-duration', '6s');

// CSS 會自動使用新的值
// 下次切換到 .inhale 或 .exhale 時
// 動畫就會使用新的時長
```

---

## 使用者體驗提升

### Before（v2.3.2）
```
使用者感受：
😟 圓球變化太快
😟 跟不上呼吸節奏
😟 感覺很急促
😟 不舒服
```

### After（v2.3.3）
```
使用者感受：
😌 圓球緩慢變化
😌 完美同步呼吸
😌 節奏很舒服
😌 很容易跟隨
```

---

## 呼吸引導效果

### 跟隨圓球呼吸

```
看到圓球開始慢慢變大
    ↓
跟著開始吸氣
    ↓
圓球持續緩慢放大
    ↓
繼續深深吸氣
    ↓
圓球到達最大
    ↓
吸飽氣了
    ↓
圓球開始慢慢變小
    ↓
開始緩緩吐氣
    ↓
圓球持續緩慢縮小
    ↓
繼續慢慢吐氣
    ↓
圓球回到最小
    ↓
吐盡氣了
```

**完美同步！**

---

## 下載測試

**[Ticket to Now v2.3.3](computer:///mnt/user-data/outputs/ticket-to-now-standalone.html)**

### 測試重點

1. **緩慢柔和**
   - [ ] 圓球放大過程緩慢、平滑
   - [ ] 圓球縮小過程緩慢、平滑
   - [ ] 沒有急促感

2. **時長同步**
   - [ ] 吸氣動畫 = 吸氣時長
   - [ ] 吐氣動畫 = 吐氣時長
   - [ ] 文字和動畫同步

3. **舒適度**
   - [ ] 容易跟隨
   - [ ] 節奏舒服
   - [ ] 視覺舒適

4. **不同呼吸法**
   - [ ] 活力呼吸（2秒）- 較快
   - [ ] 深度呼吸（5秒）- 很慢
   - [ ] 放鬆呼吸（3-6秒）- 不對稱

---

## 版本對比

| 項目 | v2.3.2 | v2.3.3 |
|------|--------|--------|
| 動畫時長 | 固定 1 秒 | 根據呼吸法 |
| 吸氣動畫 | 1 秒 ❌ | 2-5 秒 ✅ |
| 吐氣動畫 | 1 秒 ❌ | 2-6 秒 ✅ |
| 緩動函數 | ease-in-out | cubic-bezier ✅ |
| 同步性 | 不同步 ❌ | 完美同步 ✅ |
| 舒適度 | 急促 😟 | 柔和 😌 |

---

**現在動畫緩慢、柔和、自然了！** 🌊✨
